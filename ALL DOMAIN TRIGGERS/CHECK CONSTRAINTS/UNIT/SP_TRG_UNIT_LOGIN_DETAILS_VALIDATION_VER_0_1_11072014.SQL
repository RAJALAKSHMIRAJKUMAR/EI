-- VERSION 0.1 STARTDATE:11/07/2014 ENDDATE:11/07/2014 ISSUE NO: 593 DESC:THROWING ERROR MSG FOR THE CHECK CONSTRAINS. DONE BY :RL COMMENT NO#257

DROP PROCEDURE IF EXISTS SP_TRG_UNIT_LOGIN_DETAILS_VALIDATION;
CREATE PROCEDURE SP_TRG_UNIT_LOGIN_DETAILS_VALIDATION(
IN DOORCODE VARCHAR(10),
IN WEBLOGIN VARCHAR(13),
IN PROCESS TEXT)
BEGIN
	DECLARE MESSAGE_TEXT VARCHAR(50);
	IF(PROCESS = 'INSERT') OR (PROCESS = 'UPDATE')THEN
		IF(DOORCODE IS NOT NULL)THEN
			IF(LENGTH(DOORCODE)<6) THEN
				SIGNAL SQLSTATE '45000'
				SET MESSAGE_TEXT= 'DOORCODE SHOULD BE MINIMUM 6 DIGITS'; 
			END IF;
		END IF;
		IF(WEBLOGIN IS NOT NULL)THEN
			IF(LENGTH(WEBLOGIN)<5) THEN
				SIGNAL SQLSTATE '45000'
				SET MESSAGE_TEXT= 'WEBLOGIN SHOULD BE MINIMUM 5 DIGITS'; 
			END IF;
		END IF;
	END IF;
END;