--version:0.1 --sdate:23/05/2014 --edate:23/05/2014 --issue:765 --comment no#145 --desc:changed userstamp datatype as timestamp --done by:rl
DROP PROCEDURE IF EXISTS SP_UPDATE_ALL_DOMAIN_INITIALIZING_TIMESTAMP_AS_TIMESTAMP;
CREATE PROCEDURE SP_UPDATE_ALL_DOMAIN_INITIALIZING_TIMESTAMP_AS_TIMESTAMP(IN DESTINATIONSCHEMA VARCHAR(50))
BEGIN
	SET @CCN_DTLS = (SELECT CONCAT('ALTER TABLE ',DESTINATIONSCHEMA,'.CUSTOMER_CONFIGURATION MODIFY COLUMN CCN_TIMESTAMP  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'));
	PREPARE CCN_DTLS_STMT FROM @CCN_DTLS;
	EXECUTE CCN_DTLS_STMT;
	SET @UCN_DTLS = (SELECT CONCAT('ALTER TABLE ',DESTINATIONSCHEMA,'.UNIT_CONFIGURATION MODIFY COLUMN UCN_TIMESTAMP  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'));
	PREPARE UCN_DTLS_STMT FROM @UCN_DTLS;
	EXECUTE UCN_DTLS_STMT;
	SET @PCN_DTLS = (SELECT CONCAT('ALTER TABLE ',DESTINATIONSCHEMA,'.PAYMENT_CONFIGURATION MODIFY COLUMN PCN_TIMESTAMP  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'));
	PREPARE PCN_DTLS_STMT FROM @PCN_DTLS;
	EXECUTE PCN_DTLS_STMT;
	SET @ACN_DTLS = (SELECT CONCAT('ALTER TABLE ',DESTINATIONSCHEMA,'.ACCESS_CONFIGURATION MODIFY COLUMN ACN_TIMESTAMP  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'));
	PREPARE ACN_DTLS_STMT FROM @ACN_DTLS;
	EXECUTE ACN_DTLS_STMT;
	SET @OCN_DTLS = (SELECT CONCAT('ALTER TABLE ',DESTINATIONSCHEMA,'.OCBC_CONFIGURATION MODIFY COLUMN OCN_TIMESTAMP  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'));
	PREPARE OCN_DTLS_STMT FROM @OCN_DTLS;
	EXECUTE OCN_DTLS_STMT;
	SET @ECN_DTLS = (SELECT CONCAT('ALTER TABLE ',DESTINATIONSCHEMA,'.EXPENSE_CONFIGURATION MODIFY COLUMN ECN_TIMESTAMP  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'));
	PREPARE ECN_DTLS_STMT FROM @ECN_DTLS;
	EXECUTE ECN_DTLS_STMT;
	SET @DDC_DTLS = (SELECT CONCAT('ALTER TABLE ',DESTINATIONSCHEMA,'.DEPOSIT_DEDUCTION_CONFIGURATION MODIFY COLUMN DDC_TIMESTAMP  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'));
	PREPARE DDC_DTLS_STMT FROM @DDC_DTLS;
	EXECUTE DDC_DTLS_STMT;
	SET @EMC_DTLS = (SELECT CONCAT('ALTER TABLE ',DESTINATIONSCHEMA,'.ERROR_MESSAGE_CONFIGURATION MODIFY COLUMN EMC_TIMESTAMP  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'));
	PREPARE EMC_DTLS_STMT FROM @EMC_DTLS;
	EXECUTE EMC_DTLS_STMT;
	SET @TC_DTLS = (SELECT CONCAT('ALTER TABLE ',DESTINATIONSCHEMA,'.TRIGGER_CONFIGURATION MODIFY COLUMN TC_TIMESTAMP  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'));
	PREPARE TC_DTLS_STMT FROM @TC_DTLS;
	EXECUTE TC_DTLS_STMT;
	SET @NC_DTLS = (SELECT CONCAT('ALTER TABLE ',DESTINATIONSCHEMA,'.NATIONALITY_CONFIGURATION MODIFY COLUMN NC_TIMESTAMP  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'));
	PREPARE NC_DTLS_STMT FROM @NC_DTLS;
	EXECUTE NC_DTLS_STMT;
	SET @URC_DTLS = (SELECT CONCAT('ALTER TABLE ',DESTINATIONSCHEMA,'.USER_RIGHTS_CONFIGURATION MODIFY COLUMN URC_TIMESTAMP  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'));
	PREPARE URC_DTLS_STMT FROM @URC_DTLS;
	EXECUTE URC_DTLS_STMT;
	SET @ERMCN_DTLS = (SELECT CONCAT('ALTER TABLE ',DESTINATIONSCHEMA,'.ERM_CONFIGURATION MODIFY COLUMN ERMCN_TIMESTAMP  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'));
	PREPARE ERMCN_DTLS_STMT FROM @ERMCN_DTLS;
	EXECUTE ERMCN_DTLS_STMT;
	SET @BCN_DTLS = (SELECT CONCAT('ALTER TABLE ',DESTINATIONSCHEMA,'.BANKTT_CONFIGURATION MODIFY COLUMN BCN_TIMESTAMP  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'));
	PREPARE BCN_DTLS_STMT FROM @BCN_DTLS;
	EXECUTE BCN_DTLS_STMT;
	SET @CQCN_DTLS = (SELECT CONCAT('ALTER TABLE ',DESTINATIONSCHEMA,'.CHEQUE_CONFIGURATION MODIFY COLUMN CQCN_TIMESTAMP  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'));
	PREPARE CQCN_DTLS_STMT FROM @CQCN_DTLS;
	EXECUTE CQCN_DTLS_STMT;
	SET @RCN_DTLS = (SELECT CONCAT('ALTER TABLE ',DESTINATIONSCHEMA,'.REPORT_CONFIGURATION MODIFY COLUMN RCN_TIMESTAMP  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'));
	PREPARE RCN_DTLS_STMT FROM @RCN_DTLS;
	EXECUTE RCN_DTLS_STMT;
	SET @ETD_DTLS = (SELECT CONCAT('ALTER TABLE ',DESTINATIONSCHEMA,'.EMAIL_TEMPLATE_DETAILS MODIFY COLUMN ETD_TIMESTAMP  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'));
	PREPARE ETD_DTLS_STMT FROM @ETD_DTLS;
	EXECUTE ETD_DTLS_STMT;
	SET @EL_DTLS = (SELECT CONCAT('ALTER TABLE ',DESTINATIONSCHEMA,'.EMAIL_LIST MODIFY COLUMN EL_TIMESTAMP  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'));
	PREPARE EL_DTLS_STMT FROM @EL_DTLS;
	EXECUTE EL_DTLS_STMT;
	SET @RC_DTLS = (SELECT CONCAT('ALTER TABLE ',DESTINATIONSCHEMA,'.ROLE_CREATION MODIFY COLUMN RC_TIMESTAMP  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'));
	PREPARE RC_DTLS_STMT FROM @RC_DTLS;
	EXECUTE RC_DTLS_STMT;
	SET @ULD_DTLS = (SELECT CONCAT('ALTER TABLE ',DESTINATIONSCHEMA,'.USER_LOGIN_DETAILS MODIFY COLUMN ULD_TIMESTAMP  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'));
	PREPARE ULD_DTLS_STMT FROM @ULD_DTLS;
	EXECUTE ULD_DTLS_STMT;
	SET @UA_DTLS = (SELECT CONCAT('ALTER TABLE ',DESTINATIONSCHEMA,'.USER_ACCESS MODIFY COLUMN UA_TIMESTAMP  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'));
	PREPARE UA_DTLS_STMT FROM @UA_DTLS;
	EXECUTE UA_DTLS_STMT;
	SET @MD_DTLS = (SELECT CONCAT('ALTER TABLE ',DESTINATIONSCHEMA,'.USER_MENU_DETAILS MODIFY COLUMN MD_TIMESTAMP  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'));
	PREPARE MD_DTLS_STMT FROM @MD_DTLS;
	EXECUTE MD_DTLS_STMT;
	SET @UFD_DTLS = (SELECT CONCAT('ALTER TABLE ',DESTINATIONSCHEMA,'.USER_FILE_DETAILS MODIFY COLUMN UFD_TIMESTAMP  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'));
	PREPARE UFD_DTLS_STMT FROM @UFD_DTLS;
	EXECUTE UFD_DTLS_STMT;
	SET @BRP_DTLS = (SELECT CONCAT('ALTER TABLE ',DESTINATIONSCHEMA,'.BASIC_ROLE_PROFILE MODIFY COLUMN BRP_TIMESTAMP  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'));
	PREPARE BRP_DTLS_STMT FROM @BRP_DTLS;
	EXECUTE BRP_DTLS_STMT;
	SET @BMP_DTLS = (SELECT CONCAT('ALTER TABLE ',DESTINATIONSCHEMA,'.BASIC_MENU_PROFILE MODIFY COLUMN BMP_TIMESTAMP  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'));
	PREPARE BMP_DTLS_STMT FROM @BMP_DTLS;
	EXECUTE BMP_DTLS_STMT;
END;
CALL SP_UPDATE_ALL_DOMAIN_INITIALIZING_TIMESTAMP_AS_TIMESTAMP(DESTINATIONSCHEMA);