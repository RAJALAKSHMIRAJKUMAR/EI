--version:0.3 --sadte:01/03/2014 --edate:01/03/2014 --issue:528 --commentno:12 --doneby:RL
--version:0.2 --sadte:21/02/2014 --edate:21/02/2014 --issue:528 --commentno:7 --doneby:RL
--version:0.1 --sadte:20/02/2014 --edate:20/02/2014 --issue:528 --commentno:3 --doneby:RL
DROP PROCEDURE IF EXISTS SP_POST_AUDIT_CREATE_QUERY;
CREATE PROCEDURE SP_POST_AUDIT_CREATE_QUERY()
BEGIN
	SET FOREIGN_KEY_CHECKS=0;
	DROP TABLE IF EXISTS POST_AUDIT_PROFILE;
	CREATE TABLE POST_AUDIT_PROFILE(
	POSTAP_ID INTEGER AUTO_INCREMENT NOT NULL,
	POSTAP_DATA VARCHAR(50) NOT NULL,
	PRIMARY KEY(POSTAP_ID));

	DROP TABLE IF EXISTS POST_AUDIT_HISTORY;
	CREATE TABLE POST_AUDIT_HISTORY(
	POSTAH_ID INTEGER AUTO_INCREMENT NOT NULL,
	PREAMP_ID INTEGER NOT NULL,
	PREASP_ID INTEGER NOT NULL,
	POSTAP_ID INTEGER NOT NULL,
	POSTAH_NO_OF_REC INTEGER NOT NULL,
	POSTAH_DURATION	TIME NOT NULL,
	POSTAH_NO_OF_REJ INTEGER NOT NULL,
	POSTAH_USERSTAMP VARCHAR(50) NOT NULL,
--	ULD_ID INTEGER(2) NOT NULL,
	POSTAH_TIMESTAMP TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
	PRIMARY KEY(POSTAH_ID),
	FOREIGN KEY(PREAMP_ID) REFERENCES PRE_AUDIT_MAIN_PROFILE (PREAMP_ID),
	FOREIGN KEY(PREASP_ID) REFERENCES PRE_AUDIT_SUB_PROFILE (PREASP_ID),
	FOREIGN KEY(POSTAP_ID) REFERENCES POST_AUDIT_PROFILE (POSTAP_ID));
--	FOREIGN KEY(ULD_ID) REFERENCES USER_LOGIN_DETAILS (ULD_ID));
	SET FOREIGN_KEY_CHECKS=1;
END;

CALL SP_POST_AUDIT_CREATE_QUERY();