--version:0.4 --sadte:13/03/2014 --edate:13/03/2014 --issue:528 --commentno:17 --doneby:RL
--version:0.3 --sadte:01/03/2014 --edate:01/03/2014 --issue:528 --commentno:10,12 --doneby:RL
--version:0.2 --sadte:21/02/2014 --edate:21/02/2014 --issue:528 --commentno:7 --doneby:RL
--version:0.1 --sadte:20/02/2014 --edate:20/02/2014 --issue:528 --commentno:3 --doneby:RL
DROP PROCEDURE IF EXISTS SP_PRE_AUDIT_CREATE_INSERT;
CREATE PROCEDURE SP_PRE_AUDIT_CREATE_INSERT()
BEGIN
	SET FOREIGN_KEY_CHECKS = 0;
--QUERY FOR CREATE PRE_AUDIT_MAIN_PROFILE TABLE
	DROP TABLE IF EXISTS PRE_AUDIT_MAIN_PROFILE;
	CREATE TABLE PRE_AUDIT_MAIN_PROFILE(
	PREAMP_ID INTEGER NOT NULL AUTO_INCREMENT,
	PREAMP_DATA	VARCHAR(50) NOT NULL,
	PRIMARY KEY(PREAMP_ID));
--QUERY FOR CREATE PRE_AUDIT_SUB_PROFILE TABLE
	DROP TABLE IF EXISTS PRE_AUDIT_SUB_PROFILE;
	CREATE TABLE PRE_AUDIT_SUB_PROFILE(
	PREASP_ID INTEGER NOT NULL AUTO_INCREMENT,
	PREAMP_ID INTEGER NOT NULL,
	PREASP_DATA	VARCHAR(50) NOT NULL,
	PREASP_NO_OF_REC INTEGER NULL,
	PRIMARY KEY(PREASP_ID),
	FOREIGN KEY(PREAMP_ID) REFERENCES PRE_AUDIT_MAIN_PROFILE (PREAMP_ID));
--QUERY FOR CREATE PRE_AUDIT_HISTORY TABLE
	DROP TABLE IF EXISTS PRE_AUDIT_HISTORY;
	CREATE TABLE PRE_AUDIT_HISTORY(
	PREAH_ID INTEGER NOT NULL AUTO_INCREMENT,
	PREAMP_ID INTEGER NOT NULL,
	PREAMP_PROJ_KEY	VARCHAR(50) NULL,
	PREAMP_STATUS INTEGER NOT NULL,
	PREAMP_SCDB_REC_BDUMP INTEGER NULL,
	PREAMP_SCDB_AREC INTEGER NULL,
	PREAMP_SQL_REC INTEGER NOT NULL,
	PREAMP_PSTIME TIME NOT NULL,
	PREAMP_PETIME TIME NOT NULL,
	PREAMP_EXE_TIME	TIME NOT NULL,
	ULD_ID INTEGER(2) NOT NULL,
	PREAMP_TIMESTAMP TIMESTAMP NOT NULL,
	PRIMARY KEY(PREAH_ID),
	FOREIGN KEY(PREAMP_ID) REFERENCES PRE_AUDIT_MAIN_PROFILE (PREAMP_ID),
	FOREIGN KEY(ULD_ID) REFERENCES USER_LOGIN_DETAILS (ULD_ID));
	
	
--QUERY FOR INSERT PRE_AUDIT_MAIN_PROFILE TABLE
	INSERT INTO PRE_AUDIT_MAIN_PROFILE(PREAMP_DATA) VALUES
	('CONFIGURATION'),('EMAIL'),('USER RIGHTS'),('UNIT'),('CUSTOMER'),('ACCESS'),('PAYMENT'),('OCBC'),('ERM'),('BANKTT'),('CHEQUE'),
	('EMPLOYEE'),('STAFF DETAIL'),('STAFF DAILY'),('PERSONAL'),('BIZ DETAIL'),('BIZ DAILY'),('SS EMAIL'),('SS CONFIGURATION'),
	('SS USER RIGHTS'),('ERM OCCUPATION DETAILS'),('ERM ENTRY DETAILS'),('CHEQUE STATUS DETAILS'),
	('CHEQUE ENTRY DETAILS'),('BANK TRANSFER TYPE'),('BANK TRANSFER STATUS'),('BANK TRANSFER MODELS'),
	('BANK TRANSFER CREATED BY'),('BANK TRANSFER CHARGES TO'),('BANK TRANSFER');
--QUERY FOR INSERT PRE_AUDIT_SUB_PROFILE TABLE
	INSERT INTO PRE_AUDIT_SUB_PROFILE(PREAMP_ID,PREASP_DATA) VALUES
	(1,'CONFIGURATION_PROFILE'),(1,'CONFIGURATION'),(1,'CUSTOMER_CONFIGURATION'),(1,'UNIT_CONFIGURATION'),
	(1,'PAYMENT_CONFIGURATION'),(1,'ACCESS_CONFIGURATION'),(1,'OCBC_CONFIGURATION'),(1,'EXPENSE_CONFIGURATION'),
	(1,'DEPOSIT_DEDUCTION_CONFIGURATION'),(1,'ERROR_MESSAGE_CONFIGURATION'),(1,'TRIGGER_CONFIGURATION'),
	(1,'NATIONALITY_CONFIGURATION'),(1,'USER_RIGHTS_CONFIGURATION'),(1,'ERM_CONFIGURATION'),
	(1,'BANKTT_CONFIGURATION'),(1,'CHEQUE_CONFIGURATION'),(1,'REPORT_CONFIGURATION'),(1,'CUSTOMER_PAYMENT_PROFILE'),
	(1,'CUSTOMER_TIME_PROFILE'),(1,'PAYMENT_PROFILE'),(1,'TICKLER_PROFILE'),(1,'POST_AUDIT_PROFILE'),
	(2,'EMAIL_TEMPLATE'),(2,'EMAIL_TEMPLATE_DETAILS'),(2,'EMAIL_PROFILE'),(2,'EMAIL_LIST'),
	(3,'MENU_PROFILE'),(3,'ROLE_CREATION'),(3,'FILE_PROFILE'),(3,'USER_LOGIN_DETAILS'),
	(3,'USER_ACCESS'),(3,'USER_MENU_DETAILS'),(3,'USER_FILE_DETAILS'),(3,'BASIC_ROLE_PROFILE'),(3,'BASIC_MENU_PROFILE'),
	(3,'PUBLIC_HOLIDAY'),(3,'STORED_PROCEDURE_PROFILE'),(3,'VIEW_PROFILE'),(3,'PLATFORM_MANAGEMENT'),
	(4,'UNIT'),(4,'UNIT_ROOM_TYPE_DETAILS'),(4,'UNIT_STAMP_DUTY_TYPE'),(4,'UNIT_DETAILS'),
	(4,'UNIT_LOGIN_DETAILS'),(4,'UNIT_ACCESS_STAMP_DETAILS'),(4,'UNIT_ACCOUNT_DETAILS'),
	(5,'CUSTOMER'),(5,'CUSTOMER_COMPANY_DETAILS'),(5,'CUSTOMER_ENTRY_DETAILS'),(5,'CUSTOMER_FEE_DETAILS'),
	(5,'CUSTOMER_TERMINATION_DETAILS'),(5,'CUSTOMER_PERSONAL_DETAILS'),(6,'CUSTOMER_ACCESS_CARD_DETAILS'),
	(7,'PAYMENT_DETAILS'),(8,'OCBC_BANK_RECORDS'),(9,'ERM_OCCUPATION_DETAILS'),(9,'ERM_ENTRY_DETAILS'),
	(10,'BANK_TRANSFER_MODELS'),(10,'BANK_TRANSFER_STATUS_DETAILS'),(10,'BANK_TRANSFER'),(10,'BANK_TRANSFER_DETAIL'),
	(11,'CHEQUE_ENTRY_DETAILS'),(12,'EMPLOYEE_DETAILS'),(12,'EMPLOYEE_CARD_DETAILS'),
	(13,'EXPENSE_DETAIL_STAFF_SALARY'),(14,'EXPENSE_STAFF_SALARY'),(14,'EXPENSE_STAFF'),(14,'EXPENSE_AGENT'),
	(15,'EXPENSE_PERSONAL'),(15,'EXPENSE_CAR'),(15,'EXPENSE_BABY'),(15,'EXPENSE_CAR_LOAN'),
	(16,'EXPENSE_AIRCON_SERVICE_BY'),(16,'EXPENSE_DETAIL_STARHUB'),(16,'EXPENSE_DETAIL_ELECTRICITY'),
	(16,'EXPENSE_DETAIL_DIGITAL_VOICE'),(16,'EXPENSE_DETAIL_AIRCON_SERVICE'),(16,'EXPENSE_DETAIL_CARPARK'),
	(17,'EXPENSE_UNIT'),(17,'EXPENSE_ELECTRICITY'),(17,'EXPENSE_STARHUB'),(17,'EXPENSE_DIGITAL_VOICE'),
	(17,'EXPENSE_FACILITY_USE'),(17,'EXPENSE_CARPARK'),(17,'EXPENSE_MOVING_IN_AND_OUT '),(17,'EXPENSE_AIRCON_SERVICE'),
	(17,'EXPENSE_PURCHASE_NEW_CARD'),(17,'EXPENSE_PETTY_CASH'),(17,'EXPENSE_HOUSEKEEPING'),(17,'EXPENSE_HOUSEKEEPING_PAYMENT'),
	(17,'EXPENSE_HOUSEKEEPING_UNIT');
	SET FOREIGN_KEY_CHECKS = 1;
END;

CALL SP_PRE_AUDIT_CREATE_INSERT();