-- version:0.3 --sdate:21/11/2014 --edate:21/11/2014 --issue:836 --comment no#136 --desc:CHANGED FILE NAME --done by:DHIVYA

-- version:0.2 --sdate:22/08/2014 --edate:22/08/2014 --issue:831 --comment no#141 --desc:added 1 output parameter --done by:RL
-- VER:0.1 --SDATE:24/07/2014 --EDATE:25/07/2014 --ISSUE:831 --DESC:UPDATE THE TICKLER HISTORY FOR ACCESS_CARD_DETAILS --DONEBY:THIRUPATHI.P
DROP PROCEDURE IF EXISTS SP_ACCESS_CARD_TICKLER_HISTORY_NEWVALUE;
CREATE PROCEDURE SP_ACCESS_CARD_TICKLER_HISTORY_NEWVALUE(
IN CUSTOMERID INTEGER,
IN CACDID INTEGER,
IN USERSTAMP VARCHAR(50),
OUT NEWVALUE_ACCESS TEXT,
OUT NEWUASDID INTEGER)
BEGIN
	SET NEWVALUE_ACCESS='';
	SET NEWUASDID = (SELECT UASD_ID FROM CUSTOMER_ACCESS_CARD_DETAILS WHERE CUSTOMER_ID = CUSTOMERID AND CACD_ID = CACDID);
	SET NEWVALUE_ACCESS = (SELECT CONCAT (NEWVALUE_ACCESS,'UASD_ID = ',NEWUASDID));
END;
