DROP PROCEDURE IF EXISTS SP_TRG_EMPLOYEE_CARD_DETAILS;
CREATE PROCEDURE SP_TRG_EMPLOYEE_CARD_DETAILS( 
IN UASDID INTEGER,
IN CARD VARCHAR(10))
BEGIN
	DECLARE MESSAGE_TEXT VARCHAR(100);
	DECLARE ERROR_MSG TEXT;
	IF(CARD='INSERT') THEN
		IF EXISTS (SELECT UASD_ID FROM EMPLOYEE_CARD_DETAILS WHERE UASD_ID=UASDID) THEN
			SET ERROR_MSG = (SELECT EMC_DATA FROM ERROR_MESSAGE_CONFIGURATION WHERE EMC_ID = 567);
			SIGNAL SQLSTATE '45000'
			SET MESSAGE_TEXT= ERROR_MSG;
		END IF;
	END IF;
	IF(CARD='UPDATE') THEN
		IF EXISTS (SELECT UASD_ID FROM EMPLOYEE_CARD_DETAILS WHERE UASD_ID=UASDID) THEN
			SET ERROR_MSG = (SELECT EMC_DATA FROM ERROR_MESSAGE_CONFIGURATION WHERE EMC_ID = 568);
			SIGNAL SQLSTATE '45000'
			SET MESSAGE_TEXT= ERROR_MSG;
		END IF;
	END IF;
 END;
