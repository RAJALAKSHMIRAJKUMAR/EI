DROP PROCEDURE IF EXISTS SP_TRG_UNIT_LOGIN_DETAILS_VALIDATION;
CREATE PROCEDURE SP_TRG_UNIT_LOGIN_DETAILS_VALIDATION(
IN DOORCODE VARCHAR(10),
IN WEBLOGIN VARCHAR(13),
IN PROCESS TEXT)
BEGIN
	DECLARE MESSAGE_TEXT VARCHAR(50);
	DECLARE ERRORMSG TEXT;
	IF(PROCESS = 'INSERT') OR (PROCESS = 'UPDATE')THEN
		IF(DOORCODE IS NOT NULL)THEN
			IF(LENGTH(DOORCODE)<6) THEN
        SET ERRORMSG=(SELECT EMC_DATA FROM ERROR_MESSAGE_CONFIGURATION WHERE EMC_ID=467);
				SIGNAL SQLSTATE '45000'
				SET MESSAGE_TEXT= ERRORMSG; 
			END IF;
		END IF;
		IF(WEBLOGIN IS NOT NULL)THEN
			IF(LENGTH(WEBLOGIN)<5) THEN
        SET ERRORMSG=(SELECT EMC_DATA FROM ERROR_MESSAGE_CONFIGURATION WHERE EMC_ID=466);
				SIGNAL SQLSTATE '45000'
				SET MESSAGE_TEXT= ERRORMSG; 
			END IF;
		END IF;
	END IF;
END;
