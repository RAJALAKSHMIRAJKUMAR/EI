DROP PROCEDURE IF EXISTS SP_EXPENSE_BABY_INSERT;
CREATE PROCEDURE SP_EXPENSE_BABY_INSERT(IN FILENAME TEXT,
IN USERSTAMP VARCHAR(50),
OUT SUCCESS_MESSAGE TEXT)
BEGIN
	DECLARE FAILURE_ECN_DATA TEXT;
	DECLARE FAIL_ECNDATA TEXT;
	DECLARE SUCCESS_ECNDATA TEXT;
	DECLARE FAILURE_ECNDATA TEXT;
	DECLARE SUCCESSECNDATA TEXT;
	DECLARE FAILUREECNDATA TEXT;
	DECLARE PATCHFILENAME VARCHAR(100);
	DECLARE PHSTATUS TINYINT;
	DECLARE MINID INTEGER;
	DECLARE MAXID INTEGER;
	DECLARE ECNDATA TEXT;
	DECLARE USTAMP VARCHAR(50);
	DECLARE INVOICEDATE TIMESTAMP;
	DECLARE EXIT HANDLER FOR SQLEXCEPTION
	BEGIN 
		ROLLBACK;
		DROP TABLE IF EXISTS TEMP_BABY_EXPENSE;
	END;
	SET AUTOCOMMIT = 0;
 	START TRANSACTION;
	SET SUCCESS_ECNDATA =  (SELECT EMC_DATA FROM ERROR_MESSAGE_CONFIGURATION WHERE EMC_ID=469);
	SET FAILURE_ECNDATA =  (SELECT EMC_DATA FROM ERROR_MESSAGE_CONFIGURATION WHERE EMC_ID=470);
	SET FAILURE_ECN_DATA = (SELECT EMC_DATA FROM ERROR_MESSAGE_CONFIGURATION WHERE EMC_ID=473);
	SET SUCCESSECNDATA = (SELECT REPLACE(SUCCESS_ECNDATA,'[FILENAME]',FILENAME));
	SET FAILUREECNDATA = (SELECT REPLACE(FAILURE_ECNDATA,'[FILENAME]',FILENAME));
	SET FAIL_ECNDATA = (SELECT REPLACE(FAILURE_ECN_DATA,'[FILENAME]',FILENAME));
	IF EXISTS(SELECT PH_FILE_NAME FROM PATCH_HISTORY WHERE PH_FILE_NAME = FILENAME AND PH_STATUS = 1) THEN
		SET SUCCESS_MESSAGE = FAILUREECNDATA;
	END IF;
	SET PATCHFILENAME = (SELECT PH_FILE_NAME FROM PATCH_HISTORY WHERE PH_FILE_NAME = FILENAME);
	SET PHSTATUS = (SELECT PH_STATUS FROM PATCH_HISTORY WHERE PH_FILE_NAME = FILENAME AND PH_STATUS = 0);
	IF ((PATCHFILENAME IS NOT NULL) AND (PHSTATUS = 0)) OR (PATCHFILENAME IS NULL)THEN
		DROP TABLE IF EXISTS TEMP_BABY_EXPENSE;
		CREATE TABLE TEMP_BABY_EXPENSE(
		ID INTEGER AUTO_INCREMENT PRIMARY KEY,
		PE_TYPE_OF_EXPENSE TEXT,
		PE_BABY_EXPENSE TEXT NOT NULL,
		PE_BABY_INVOICE_DATE DATE NOT NULL,
		PE_BABY_AMOUNT DECIMAL(7,2) NOT NULL,
		PE_BABY_INVOICE_ITEMS TEXT NOT NULL,
		PE_BABY_INVOICE_FROM VARCHAR(200) NOT NULL,
		PE_BABY_COMMENTS TEXT NULL,
		PE_BABY_TIMESTAMP TIMESTAMP NULL,
		PE_USERSTAMP VARCHAR(50) NOT NULL);
		insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (1,null,'HEALTH CARE/HOSPITAL EXPENSE','2014-06-16',139.64,'Medical Fee','Kinder Clinic',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (2,null,'SCHOOL','2014-06-19',75.00,'Holiday Programme','Wee Care Kindergarten',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (3,null,'SCHOOL','2014-06-20',75.00,'June Friday Holiday program','Wee Care Kindergarten',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (4,null,'MISCELLANEOUS','2014-06-26',15.00,'Cd','Tensai',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (5,null,'SCHOOL','2014-07-03',3172.00,'Term 3 Fees','Wee Care Kindergarten',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (6,null,'MISCELLANEOUS','2014-07-08',3.90,'Socks','Kawata House of socks',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (7,null,'SCHOOL','2014-07-12',293.53,'French Class','Alliance Francaise',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (8,null,'MISCELLANEOUS','2014-07-13',11.10,'No Desc','Cool De Sac',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (9,'BABY','MISCELLANEOUS','2014-07-20',25.00,'Fee','The Polliwogs',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (10,null,'MISCELLANEOUS','2014-05-01',38.73,'Entrance Fee','Amazonia Singapore',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (11,null,'MISCELLANEOUS','2014-06-01',24.14,'Entrance Fee','Amazonia Singapore',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (12,null,'MISCELLANEOUS','2014-05-15',31.53,'Nordic Naturals Children DHA','Wellgrowth',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (13,null,'MISCELLANEOUS','2014-07-28',328.00,'Samsung Galaxy Kid','Toys r us',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (14,null,'MISCELLANEOUS','2014-04-24',80.00,'Fee','Minichamps Reading & Writing',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (15,null,'MISCELLANEOUS','2014-02-23',23.00,'Play gym','Royce Kids Gym',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (16,null,'MISCELLANEOUS','2014-02-23',27.00,'Play gym','Royce Kids Gym',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (17,null,'MISCELLANEOUS','2014-07-27',36.00,'Funplay','Royce Kids Gym',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (18,null,'HEALTH CARE/HOSPITAL EXPENSE','2014-07-30',194.74,'Medicine and consultation fee','Kinder Clinic',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (19,null,'MISCELLANEOUS','2014-07-30',29.90,'Shoes','Isetan',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (20,null,'MISCELLANEOUS','2014-07-30',34.36,'Clothes','Isetan',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (21,null,'HEALTH CARE/HOSPITAL EXPENSE','2014-08-22',25.00,'Medicine','Kinder Clinic',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (22,null,'HEALTH CARE/HOSPITAL EXPENSE','2014-08-20',199.56,'Consultation and medicine','Kinder Clinic',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (23,null,'SCHOOL','2014-08-27',2878.52,'Term 4, 2014 fee, Language book','Wee Care Kindergarten','Paid nets transaction 000223',null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (24,null,'SCHOOL','2014-08-27',553.00,'Term 3 Fees Chinese speech and drama','Wee Care Kindergarten','Paid nets transaction 000247',null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (25,null,'SCHOOL','2014-08-27',474.00,'Term 4 creative movement','Wee Care Kindergarten','Paid nets transaction 000247',null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (26,null,'SCHOOL','2014-08-27',474.00,'Term 4 Chinese speech & Drama','Wee Care Kindergarten','Paid nets transaction 000247',null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (27,null,'MISCELLANEOUS','2014-08-23',38.00,'Apparel','Mummykidz',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (28,null,'MISCELLANEOUS','2014-08-21',12.95,'diapers','Mustafa',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (29,null,'MISCELLANEOUS','2014-08-24',13.95,'diapers','John Little',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (30,null,'MISCELLANEOUS','2014-07-13',22.10,'Admission','Cool De Sac',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (31,null,'SCHOOL','2014-09-06',888.10,'Term fee and annual registration fee','Shichida',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (32,null,'MISCELLANEOUS','2014-08-31',11.90,'Educational toy','My greatest child',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (33,null,'MISCELLANEOUS','2014-09-04',15.00,'Notebook','Smiggle',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (34,null,'MISCELLANEOUS','2014-08-30',12.50,'Educational toy','My greatest child',null,null,'viswanath.n@ssomens.com');
insert into `TEMP_BABY_EXPENSE`(`ID`,`PE_TYPE_OF_EXPENSE`,`PE_BABY_EXPENSE`,`PE_BABY_INVOICE_DATE`,`PE_BABY_AMOUNT`,`PE_BABY_INVOICE_ITEMS`,`PE_BABY_INVOICE_FROM`,`PE_BABY_COMMENTS`,`PE_BABY_TIMESTAMP`,`PE_USERSTAMP`) values (35,null,'MISCELLANEOUS','2014-09-10',50.00,'Clothes','Baby shop asia',null,null,'viswanath.n@ssomens.com');
		UPDATE `TEMP_BABY_EXPENSE` SET PE_BABY_EXPENSE = 'HEALTH CARE/HOSPITAL EXPENSES' WHERE PE_BABY_EXPENSE = 'HEALTH CARE/HOSPITAL EXPENSE';
		ALTER TABLE `TEMP_BABY_EXPENSE` ADD COLUMN ECN_ID INTEGER NOT NULL;
		ALTER TABLE `TEMP_BABY_EXPENSE` ADD COLUMN ULDID INTEGER NOT NULL;
		SET MINID = (SELECT MIN(ID) FROM `TEMP_BABY_EXPENSE`);
		SET MAXID = (SELECT MAX(ID) FROM `TEMP_BABY_EXPENSE`);
		WHILE(MINID <= MAXID)DO
			SET USTAMP = (SELECT PE_USERSTAMP FROM `TEMP_BABY_EXPENSE` WHERE ID = MINID);
			SET ECNDATA = (SELECT PE_BABY_EXPENSE FROM `TEMP_BABY_EXPENSE` WHERE ID = MINID);
			SET INVOICEDATE = (SELECT PE_BABY_INVOICE_DATE FROM `TEMP_BABY_EXPENSE` WHERE ID = MINID);
			UPDATE `TEMP_BABY_EXPENSE` SET ECN_ID = (SELECT ECN_ID FROM EXPENSE_CONFIGURATION WHERE ECN_DATA = ECNDATA AND CGN_ID = 25),
			ULDID = (SELECT ULD_ID FROM USER_LOGIN_DETAILS WHERE ULD_LOGINID = USTAMP),
			PE_BABY_TIMESTAMP = INVOICEDATE WHERE ID = MINID;
		SET MINID = MINID+1;
		END WHILE;
		INSERT INTO EXPENSE_BABY(ECN_ID,EB_INVOICE_DATE,EB_AMOUNT,EB_INVOICE_ITEMS,EB_INVOICE_FROM,EB_COMMENTS,ULD_ID,EB_TIMESTAMP)
		SELECT ECN_ID,PE_BABY_INVOICE_DATE,PE_BABY_AMOUNT,PE_BABY_INVOICE_ITEMS,PE_BABY_INVOICE_FROM,PE_BABY_COMMENTS,ULDID,PE_BABY_TIMESTAMP FROM TEMP_BABY_EXPENSE;
		INSERT INTO PATCH_HISTORY(PO_ID,PH_FILE_NAME,PH_STATUS,ULD_ID) VALUES (8,FILENAME,1,(SELECT ULD_ID FROM USER_LOGIN_DETAILS WHERE ULD_LOGINID=USERSTAMP));
		SET SUCCESS_MESSAGE = SUCCESSECNDATA;
	END IF;
	DROP TABLE IF EXISTS `TEMP_BABY_EXPENSE`;
	COMMIT;
END;
CALL SP_EXPENSE_BABY_INSERT(FILENAME,USERSTAMP,@SUCCESS_MESSAGE);