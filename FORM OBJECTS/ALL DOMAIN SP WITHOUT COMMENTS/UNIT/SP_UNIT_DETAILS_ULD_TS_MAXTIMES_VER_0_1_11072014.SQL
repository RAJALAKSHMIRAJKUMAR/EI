DROP PROCEDURE IF EXISTS SP_UNIT_DETAILS_ULD_TS_MAXTIMES;
CREATE PROCEDURE SP_UNIT_DETAILS_ULD_TS_MAXTIMES(IN UNIT_NUMBER_ID INTEGER,USER_ULDID INTEGER)
BEGIN
	DECLARE ULDTSMAXTIMES INTEGER;
	DECLARE EXIT HANDLER FOR SQLEXCEPTION
	BEGIN
		ROLLBACK;
	END;
	SET ULDTSMAXTIMES = (SELECT ULD_TS_MAXTIMES FROM UNIT_DETAILS WHERE UNIT_ID = UNIT_NUMBER_ID);
	UPDATE UNIT_DETAILS SET ULD_TS_MAXTIMES = (ULDTSMAXTIMES+1),ULD_ID = USER_ULDID WHERE UNIT_ID = UNIT_NUMBER_ID;
	COMMIT;
END;